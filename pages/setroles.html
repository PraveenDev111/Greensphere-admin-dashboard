<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Search</title>
    <style>
        .user-list { margin-top: 20px; }
        .user-item { padding: 10px; border: 1px solid #ddd; margin-bottom: 5px; }
    </style>
</head>
<body>
    <h1>User Search</h1>
    <input type="text" id="searchInput" placeholder="Search users..." onkeyup="searchUsers()">
    <div class="user-list" id="userList"></div>
    <script>
        let users = [];
        // Fetch users from the backend when the page loads
        document.addEventListener('DOMContentLoaded', (event) => {
            fetch('http://localhost:8090/api/v1/admin/users/all')
                .then(response => response.json())
                .then(data => {
                    users = data;
                    displayUsers(users);
                })
                .catch(error => console.error('Error fetching users:', error));
        });

        // Display the list of users
        function displayUsers(users) {
            const userList = document.getElementById('userList');
            userList.innerHTML = '';
            users.forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.textContent = `${user.id} ${user.username} (${user.email})`;
                userList.appendChild(userItem);
            });
        }

        // Filter and display users based on the search query
        function searchUsers() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filteredUsers = users.filter(user => 
                user.username.toLowerCase().includes(query) ||
                user.email.toLowerCase().includes(query)
            );
            displayUsers(filteredUsers);
        }
    </script>

</body>
</html>
